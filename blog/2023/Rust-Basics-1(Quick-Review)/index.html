<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Rust Basics 1(Quick Review) | Tianchi YU</title> <meta name="author" content="Tianchi YU"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://lialittis.github.io/blog/2023/Rust-Basics-1(Quick-Review)/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Tianchi </span>YU</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">GitRepos</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Rust Basics 1(Quick Review)</h1> <p class="post-meta">July 1, 2023• TC YU</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/tag/rust"> <i class="fas fa-hashtag fa-sm"></i> Rust</a>     ·   <a href="/blog/category/tutorials"> <i class="fas fa-tag fa-sm"></i> Tutorials</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="rust-basics1">Rust Basics(1)</h1> <h2 id="anatomy-of-a-rust-program">Anatomy of a Rust Program</h2> <ul> <li>indent with four spaces, not a tab</li> <li> <code class="language-plaintext highlighter-rouge">println!</code> calls a Rust marco</li> <li>end the line with a semicolon(;)</li> </ul> <h2 id="compiling-and-running-are-seperate-steps">Compiling and Running Are Seperate Steps</h2> <p>Rust is an <em>ahead-of-time</em> compiled language.</p> <h2 id="cargo">Cargo</h2> <p>Cargo creats a project in a new directory and initializes a new Git repository along with a <code class="language-plaintext highlighter-rouge">.gitignore</code> file.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Note: Git is a common version control system. You can change cargo new to use a different version control 
system or no version control system by using the --vcs flag. Run cargo new --help to see the available 
options.
</code></pre></div></div> <p>Cargo expects sources files to live inside the <code class="language-plaintext highlighter-rouge">src</code> directory and puts the binary in a directory named <code class="language-plaintext highlighter-rouge">debug</code>.</p> <ul> <li><code class="language-plaintext highlighter-rouge">cargo new</code></li> <li><code class="language-plaintext highlighter-rouge">cargo build</code></li> <li><code class="language-plaintext highlighter-rouge">cargo run</code></li> <li><code class="language-plaintext highlighter-rouge">cargo check</code></li> </ul> <h3 id="tomltoms-obvious-minimal-language">TOML(Tom’s Obvious, Minimal Language)</h3> <p>It is Cargo’s configuration format.</p> <h3 id="building-for-release">Building for Release</h3> <p><code class="language-plaintext highlighter-rouge">cargo build --release</code> compile the project with optimizations.</p> <h2 id="crate">Crate</h2> <p>A <code class="language-plaintext highlighter-rouge">crate</code> is a collection of Rust source code files. For example, the <code class="language-plaintext highlighter-rouge">rand</code> crate is a <em>library</em> crate, which contains code that is intended to be used in other programs.</p> <h3 id="external-crates">external crates</h3> <p>The external crates are added into projects as dependencies. Cargo fetches the latest versions of everything that dependency needs from the <em>registry</em>, which is a copy of data from <code class="language-plaintext highlighter-rouge">Crates.io</code>.</p> <h3 id="cargolock">Cargo.lock</h3> <p>If <code class="language-plaintext highlighter-rouge">Cargo.lock</code> exists, Cargo will use the versions specified there rather than doing all the work of figuring out versions again, which lets us have a reproducible build automatically.</p> <h3 id="update">update</h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cargo update
</code></pre></div></div> <p>helps you to update a crate.</p> <h1 id="common-programming-concepts">Common Programming Concepts</h1> <h2 id="variables-and-mutability">Variables and Mutability</h2> <p>By default, variables in Rust are immutable.</p> <p>You would get compile-time errors when we attempt to change a value that is designated as immutable.</p> <h3 id="constants">Constants</h3> <p>Like immutable variables, but constants:</p> <ul> <li>don’t accept mut syntax.</li> <li>use const keyword</li> <li>the type of the value must be annotated</li> </ul> <h3 id="shadowing">Shadowing</h3> <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

    <span class="p">{</span>
        <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"The value of x in the inner scope is: {x}"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nd">println!</span><span class="p">(</span><span class="s">"The value of x is: {x}"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <p>When you run it:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cargo run
   Compiling variables v0.1.0 <span class="o">(</span>file:///projects/variables<span class="o">)</span>
    Finished dev <span class="o">[</span>unoptimized + debuginfo] target<span class="o">(</span>s<span class="o">)</span> <span class="k">in </span>0.31s
     Running <span class="sb">`</span>target/debug/variables<span class="sb">`</span>
The value of x <span class="k">in </span>the inner scope is: 12
The value of x is: 6
</code></pre></div></div> <p>But shadowing:</p> <ul> <li>we create a new variable</li> <li>we can change the type of the value</li> </ul> <h2 id="data-types">Data Types</h2> <p>Rust is a statically typed language, it must know the types of all variables at compile time.</p> <h3 id="scalar-types">Scalar Types</h3> <p>Four primary scalar types : integers, floating-point numbers, Booleans and characters.</p> <h4 id="integer-types">Integer Types</h4> <p>Integer Literals in Rust</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Number literals	Example
Decimal	98_222
Hex	0xff
Octal	0o77
Binary	0b1111_0000
Byte (u8 only)	b'A'
</code></pre></div></div> <p>Integer Overflow</p> <ul> <li>In debug mode, Rust includes checks for integer overflow and cause the program to <code class="language-plaintext highlighter-rouge">panic</code> at runtime.</li> <li>In release mode, Rust performs <em>two’s complement wrapping</em> for the value, and the program won’t panic.</li> </ul> <h4 id="floating-point-types">Floating-point Types</h4> <p>Two primitive types : numbers with decimal points f32 and f64.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fn main() {
    let x = 2.0; // f64

    let y: f32 = 3.0; // f32
}
</code></pre></div></div> <h3 id="boolean-type">Boolean Type</h3> <p><code class="language-plaintext highlighter-rouge">true</code> and <code class="language-plaintext highlighter-rouge">false</code></p> <h3 id="character-type">Character Type</h3> <p>Four bytes in size and Unicode Scalar Value.</p> <h3 id="compound-types">Compound Types</h3> <h4 id="tuple">Tuple</h4> <ul> <li>a variety fo types</li> <li>a fixed length</li> <li>comma-separated list</li> <li>access a tuple element by using a period (.) followed by the index</li> <li>tuple without any values has a special name, <em>unit</em> : an empty value ()</li> </ul> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);
}
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fn main() {
    let tup = (500, 6.4, 1);

    let (x, y, z) = tup;

    println!("The value of y is: {y}");
}
</code></pre></div></div> <h4 id="array">Array</h4> <ul> <li>same type</li> <li>a fixed lenght</li> <li>comma-separated list</li> <li>access elements by using indexing</li> </ul> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fn main() {
    let a = [1, 2, 3, 4, 5];
    
    let a: [i32; 5] = [1, 2, 3, 4, 5];

    let a = [3; 5]; // equal to [3, 3, 3, 3, 3];

    let first = a[0];
    let second = a[1];

}
</code></pre></div></div> <p>Arrays are useful when you want your data allocated on the stack rather than the heap.</p> <p><strong>Runtime error : invalid array element access:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>use std::io;

fn main() {
    let a = [1, 2, 3, 4, 5];

    println!("Please enter an array index.");

    let mut index = String::new();

    io::stdin()
        .read_line(&amp;mut index)
        .expect("Failed to read line");

    let index: usize = index
        .trim()
        .parse()
        .expect("Index entered was not a number");

    let element = a[index];

    println!("The value of the element at index {index} is: {element}");
}
</code></pre></div></div> <p>The program resulted in a runtime error at the point of using an invalid value in the indexing operation. This check has to happen at runtime, especially in this case, because the compiler can’t possibly know what value a user will enter when they run the code later.</p> <h2 id="functions">Functions</h2> <p>Functions are prevalent in Rust code.</p> <p>Rust code uses <em>snake case</em> as the conventional style for function and variable names.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fn main() {
    println!("Hello, world!");

    another_function();
}

fn another_function() {
    println!("Another function.");
}
</code></pre></div></div> <p>In function signatures, you must declare the type of each parameter. <strong>Requiring type annotations in function definitions means the compiler almost never needs you to use them elsewhere in the code to figure out what type you mean</strong>.</p> <h3 id="statements-and-expressions">Statements and Expressions</h3> <p>Function bodies are made up of a series of statements optionally ending in an expression.</p> <ul> <li>Statements are instructions that perform some action and do not return a value.</li> <li>Expressions evaluate to a resultant value.</li> </ul> <p>Expressions do not include ending semicolons. If you add a semicolon to the end of an expression, you turn it into a statement, and it will then not return a value.</p> <h3 id="functions-with-return-values">Functions with Return Values</h3> <p>We must declare the return type after an arrow (-&gt;).</p> <p>We need to have an expression as the return value. If not, there might be mismatched types error.</p> <h2 id="control-flow">Control Flow</h2> <h3 id="if-expressions">if Expressions</h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if condition {

} else {

}
</code></pre></div></div> <p>Boolean is expected after <code class="language-plaintext highlighter-rouge">if</code>, Rust cannot automatically convert non-Boolean to Boolean types.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if condition {

} else if condition {

} ... {

} else {

}
</code></pre></div></div> <p>Using too many <code class="language-plaintext highlighter-rouge">else if</code> expressions can clutter your code, so if you have more that one, you might wnat to refactor your code. For example by <code class="language-plaintext highlighter-rouge">match</code>.</p> <h4 id="using-if-in-a-let-statement">Using if in a let Statement</h4> <p>Because <code class="language-plaintext highlighter-rouge">if</code> is an expression, it could be used on the right side of a <code class="language-plaintext highlighter-rouge">let</code> statement.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fn main() {
    let condition = true;
    let number = if condition { 5 } else { 6 };

    println!("The value of number is: {number}");
}
</code></pre></div></div> <h3 id="repetition-with-loops">Repetition with Loops</h3> <p>Loop is an expression.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fn main() {
    loop {
        println!("again!");
    }
}
</code></pre></div></div> <h4 id="returning-values-from-loops">Returning Values from Loops</h4> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fn main() {
    let mut counter = 0;

    let result = loop {
        counter += 1;

        if counter == 10 {
            break counter * 2;
        }
    };

    println!("The result is {result}");
}
</code></pre></div></div> <h4 id="loop-labels-to-disambiguate-between-multiple-loops">Loop Labels to Disambiguate Between Multiple Loops</h4> <p>We could specify a loop label so that we use with <code class="language-plaintext highlighter-rouge">break</code> or <code class="language-plaintext highlighter-rouge">continue</code> to specify that those keywords apply to the labeled loop instead of the innermost loop.</p> <p>Note that, the <code class="language-plaintext highlighter-rouge">break</code> keyword cannot be followed by both a return value and a loop label at the same time. The <code class="language-plaintext highlighter-rouge">break</code> statement is used to exit a loop or a block early, and it can be optionally followed by an expression to provide a return value for the enclosing function or block. However, it cannot be combined with a loop label.</p> <p>The labels should be in format like : <code class="language-plaintext highlighter-rouge">'lable</code>.</p> <h4 id="conditional-loops-with-while">Conditional Loops with while</h4> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fn main() {
    let mut number = 3;

    while number != 0 {
        println!("{number}!");

        number -= 1;
    }

    println!("LIFTOFF!!!");
}
</code></pre></div></div> <h4 id="looping-through-a-collection-with-for">Looping Through a Collection with for</h4> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fn main() {
    let a = [10, 20, 30, 40, 50];

    for element in a {
        println!("the value is: {element}");
    }
}
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fn main() {
    for number in (1..4).rev() {
        println!("{number}!");
    }
    println!("LIFTOFF!!!");
}
</code></pre></div></div> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/Performance-Benefits-From-Underutilized-CPU/">Performance Benefits From Underutilized CPU</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/How-to-Write-A-CORRECT-LLVM-Pass-As-A-Plugin/">How to Write A CORRECT LLVM Pass As A Plugin</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/What-is-Three-Address-Code/">What is Three Address Code (3AC) ?</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/Lexical-Analysis,-Syntax-Analysis,-and-Semantic-Analysis-copy/">Lexical Analysis, Syntax Analysis, and Semantic Analysis</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2020/Signature-Algorithm/">Signature Algorithm 数字签名算法</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Tianchi YU. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js"></script> <script defer src="/assets/js/common.js"></script> <script defer src="/assets/js/copy_code.js" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>